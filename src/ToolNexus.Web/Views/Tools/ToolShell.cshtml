@model ToolPageViewModel
@{
    ViewData["Title"] = Model.Seo.Title;
    ViewData["Description"] = Model.Seo.Description;
    ViewData["CanonicalUrl"] = Model.Seo.CanonicalUrl;
    ViewData["JsonLd"] = Model.Seo.JsonLd;
    ViewData["Keywords"] = Model.Seo.Keywords;
}

@section Head {
    @if (!string.IsNullOrWhiteSpace(Model.RuntimeCssPath))
    {
        <link rel="stylesheet" href="@Model.RuntimeCssPath" asp-append-version="true" />
    }
}

<div class="tool-page">
<article class="tool-seo" data-nosnippet="false" aria-label="Tool documentation">
    <header>
        <h1>@Model.Tool.Title</h1>
        <p>@(Model.Content?.Intro ?? Model.Tool.SeoDescription)</p>
    </header>

    <section class="tool-seo__description" aria-label="Long description">
        <h2>Overview</h2>
        <p>@(Model.Content?.LongDescription ?? Model.Tool.SeoDescription)</p>
    </section>

    @if (Model.Content?.Features.Any() == true)
    {
        <section class="tool-seo__features" aria-label="Key features">
            <h2>Features</h2>
            <ul>
                @foreach (var feature in Model.Content.Features)
                {
                    <li>@feature</li>
                }
            </ul>
        </section>
    }

    @if (Model.Content?.Steps.Any() == true)
    {
        <section class="tool-seo__usage" aria-label="How to use">
            <h2>How to use</h2>
            <ol>
                @foreach (var step in Model.Content.Steps)
                {
                    <li>
                        <h3>@step.Title</h3>
                        <p>@step.Description</p>
                    </li>
                }
            </ol>
        </section>
    }

    @if (Model.Content?.Examples.Any() == true)
    {
        <section class="tool-seo__examples" aria-label="Examples">
            <h2>Examples</h2>
            @foreach (var example in Model.Content.Examples)
            {
                <article>
                    <h3>@example.Title</h3>
                    <p><strong>Input:</strong> @example.Input</p>
                    <p><strong>Output:</strong> @example.Output</p>
                </article>
            }
        </section>
    }

    @if (Model.Content?.Faq.Any() == true)
    {
        <section class="tool-seo__faq" aria-label="Frequently asked questions">
            <h2>FAQ</h2>
            @foreach (var faq in Model.Content.Faq)
            {
                <article>
                    <h3>@faq.Question</h3>
                    <p>@faq.Answer</p>
                </article>
            }
        </section>
    }

    @if (Model.Content?.UseCases.Any() == true)
    {
        <section class="tool-seo__use-cases" aria-label="Use cases">
            <h2>Use cases</h2>
            <ul>
                @foreach (var useCase in Model.Content.UseCases)
                {
                    <li>@useCase</li>
                }
            </ul>
        </section>
    }

    @if (Model.RelatedTools.Any())
    {
        <section class="tool-seo__related" aria-label="Related tools">
            <h2>Related tools</h2>
            <ul>
                @foreach (var relatedTool in Model.RelatedTools)
                {
                    <li><a href="/tools/@relatedTool.Slug">@relatedTool.Title</a></li>
                }
            </ul>
        </section>
    }

    @if (Model.SameCategoryTools.Any())
    {
        <section class="tool-seo__same-category" aria-label="Tools in this category">
            <h2>Same category tools</h2>
            <ul>
                @foreach (var relatedTool in Model.SameCategoryTools)
                {
                    <li><a href="/tools/@relatedTool.Slug">@relatedTool.Title</a></li>
                }
            </ul>
        </section>
    }

    @if (Model.NextTools.Any())
    {
        <section class="tool-seo__next" aria-label="Next tools to try">
            <h2>Next tools</h2>
            <ul>
                @foreach (var relatedTool in Model.NextTools)
                {
                    <li><a href="/tools/@relatedTool.Slug">@relatedTool.Title</a></li>
                }
            </ul>
        </section>
    }
</article>

<div id="tool-root" data-tool-root="true" data-tool-slug="@Model.Tool.Slug" aria-label="Interactive runtime"></div>

</div>

@section Scripts {
    <script>
        window.ToolNexusConfig = {
            apiBaseUrl: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.ApiBaseUrl)),
            toolExecutionPathPrefix: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.ToolExecutionPathPrefix)),
            runtimeModulePath: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.RuntimeModulePath)),
            tool: {
                slug: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Tool.Slug)),
                title: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Tool.Title)),
                seoDescription: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Tool.SeoDescription)),
                exampleInput: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Tool.ExampleInput)),
                clientSafeActions: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Tool.ClientSafeActions))
            }
        };
    </script>
    <script type="module" src="~/js/tool-runtime.js" asp-append-version="true"></script>
}
