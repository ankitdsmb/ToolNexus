@{
    ViewData["Title"] = "Execution History";
}
<h2>Execution History</h2>
<table class="table table-sm" id="executions-table">
    <thead><tr><th>When (UTC)</th><th>Tool</th><th>Authority</th><th>Conformance</th><th>Trace</th><th></th></tr></thead>
    <tbody></tbody>
</table>
<script>
(async function() {
  const res = await fetch('/api/admin/executions?page=1&pageSize=50');
  if (!res.ok) return;
  const data = await res.json();
  const tbody = document.querySelector('#executions-table tbody');
  (data.items || []).forEach(item => {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${item.executedAtUtc}</td><td>${item.toolId}</td><td>${item.authority}</td><td>${item.conformanceStatus} (${item.conformanceIssueCount})</td><td>${item.traceId ?? '-'}</td><td><a class="btn btn-sm btn-outline-primary" href="/admin/executions/${item.id}">Details</a></td>`;
    tbody.appendChild(tr);
  });
})();
</script>
